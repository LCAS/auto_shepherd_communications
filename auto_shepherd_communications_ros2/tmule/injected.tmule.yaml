session: communicator
init_cmd: |
  echo " "
  echo " "
  echo " "
  echo "Running Initialisation"

  #exec /bin/bash
  cd @TMULE_CONFIG_DIR@ || true
  set -o pipefail

  # Source the .bashrc
  source ~/.bashrc

  # Setup ROS2 DDS Settings
  export ROS_DOMAIN_ID=70
  unset ROS_LOCALHOST_ONLY

  # Simulated device declarations
  export device_a='/dev/tnt0'
  export device_b='/dev/tnt1'
  export comms_config='./config/injected.yaml'

windows:

  - name: outputs
    panes:
      - ros2 run auto_shepherd_communications_ros2 serial_node_reciever.py device:=$device_b

  - name: system
    panes:
      - ros2 run auto_shepherd_communications_ros2 bridge_interface.py
      - ros2 run auto_shepherd_communications_ros2 serial_node.py device:=$device_a

  - name: inputs
    panes:
      - ros2 run auto_shepherd_communications_ros2 data_loader_node.py
